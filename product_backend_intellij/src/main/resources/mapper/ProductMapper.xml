<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTDMapper3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.ProductMapper">

<!--    <select id="productList" resultType="com.example.demo.vo.ProductVO">-->
<!--        SELECT * FROM product-->
<!--    </select>-->

    <select id="productColorList" resultType="com.example.demo.vo.ProductColorVO">
        select p.product_seq, p.product_title, p.product_price, p.product_img, p.product_gender, p.product_size, p.product_saled, p.product_category, p.product_content, c.color1, c.color2, c.color3, c.color4, c.color5, c.color6, c.color7, c.color8, c.color9, c.color10, c.color11, c.color12
        from product p, product_color c where p.product_seq = c.fk_product_seq
    </select>

    <select id="fetchProductByID" resultType="com.example.demo.vo.ProductVO"
            parameterType="int">
        SELECT * FROM product WHERE product_seq = #{product_seq}
    </select>

    <select id="productCategory" parameterType="String" resultType="com.example.demo.vo.ProductColorTestVO">
        select * from (select p.product_title, p.product_price, p.product_gender, p.product_category, p.product_content, p.product_img, c.* from product p,
        (select product_seq,
        max(decode(product_color, 'black','black',null)) as color1,
        max(decode(product_color, 'pink','pink',null)) as color2,
        max(decode(product_color, 'blue','blue',null)) as color3,
        max(decode(product_color, 'white','white',null)) as color4,
        max(decode(product_color, 'gray','gray',null)) as color5,
        max(decode(product_color, 'green','green',null)) as color6,
        max(decode(product_color, 'yellow','yellow',null)) as color7,
        max(decode(product_color, 'orange','orange',null)) as color8,
        max(decode(product_color, 'purple','purple',null)) as color9
        from color_test group by product_seq) c where p.product_seq = c.product_seq)
        where product_category = #{product_category}
    </select>
</mapper>